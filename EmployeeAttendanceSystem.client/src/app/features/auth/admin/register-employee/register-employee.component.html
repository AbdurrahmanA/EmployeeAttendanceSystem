<div class="register-container">
  <div class="register-card">
    <div class="card-header">
      <h2>Yeni personel kaydı</h2>
      <p class="subtitle">Sisteme yeni bir çalışan eklemek için bilgileri doldurunuz.</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">

      <div class="form-row">
        <div class="form-group">
          <label for="name">Ad</label>
          <input type="text" id="name" formControlName="name" placeholder="Örn: Ali">
          
          @if (registerForm.get('name')?.invalid && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)) {
            <div class="error-message">Ad alanı zorunludur.</div>
          }
        </div>

        <div class="form-group">
          <label for="surname">Soyad</label>
          <input type="text" id="surname" formControlName="surname" placeholder="Örn: Yılmaz">
          
          @if (registerForm.get('surname')?.invalid && (registerForm.get('surname')?.touched || registerForm.get('surname')?.dirty)) {
            <div class="error-message">Soyad alanı zorunludur.</div>
          }
        </div>
      </div>

      <div class="form-group">
        <label for="email">E-posta adresi</label>
        <input type="email" id="email" formControlName="email" placeholder="ali@sirket.com">
        
        @if (registerForm.get('email')?.invalid && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)) {
          <div class="error-message">
            {{ registerForm.get('email')?.errors?.['required'] ? 'E-posta alanı zorunludur.' : 'Geçerli bir e-posta giriniz.' }}
          </div>
        }
      </div>

      <div class="form-group">
        <label for="department">Departman <span class="optional">(İsteğe bağlı)</span></label>
        <input type="text" id="department" formControlName="department" placeholder="Örn: Yazılım">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="password">Şifre</label>
          <input type="password" id="password" formControlName="password" placeholder="******">
          
          @if (registerForm.get('password')?.invalid && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)) {
            <div class="error-message password-errors">
              
              @if (registerForm.get('password')?.errors?.['required']) {
                <div>Şifre zorunludur.</div>
              } @else {
                <ul style="margin: 0; padding-left: 15px; font-size: 0.85rem; list-style-type: disc;">
                  @if (registerForm.get('password')?.errors?.['minlength']) { <li>En az 6 karakter olmalıdır.</li> }
                  @if (registerForm.get('password')?.errors?.['missingUpper']) { <li>En az bir büyük harf (A-Z).</li> }
                  @if (registerForm.get('password')?.errors?.['missingLower']) { <li>En az bir küçük harf (a-z).</li> }
                  @if (registerForm.get('password')?.errors?.['missingNumeric']) { <li>En az bir rakam (0-9).</li> }
                  
                  @if (registerForm.get('password')?.errors?.['missingSpecial']) { <li>En az bir özel karakter (!&#64;#$...).</li> }
                  
                </ul>
              }
            </div>
          }
        </div>

        <div class="form-group">
          <label for="confirmPassword">Şifre Tekrar</label>
          <input type="password" id="confirmPassword" formControlName="confirmPassword" placeholder="******">
          
          @if (registerForm.get('confirmPassword')?.touched && (registerForm.errors?.['passwordMismatch'] || registerForm.get('confirmPassword')?.errors?.['passwordMismatch'])) {
            <div class="error-message">Şifreler eşleşmiyor.</div>
          }
        </div>
      </div>

      @if (successMessage) {
        <div class="alert success">
          <i class="bi bi-check-circle-fill"></i> {{ successMessage }}
        </div>
      }

      @if (errorMessage) {
        <div class="alert error">
          <i class="bi bi-exclamation-circle-fill"></i> {{ errorMessage }}
        </div>
      }

      <div class="form-actions">
        <button type="submit" [disabled]="registerForm.invalid || isSubmitting" class="submit-btn">
          @if (isSubmitting) {
            <span>Kaydediliyor...</span>
          } @else {
            <span>Personeli Kaydet</span>
          }
        </button>
      </div>

    </form>
  </div>
</div>